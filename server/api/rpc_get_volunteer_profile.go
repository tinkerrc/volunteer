package api

import (
	"context"

	"connectrpc.com/connect"

	apiv1 "github.com/tinkerrc/volunteer/proto/api/v1" // generated by protoc-gen-go
)

func (s *APIServer) GetVolunteerProfile(
	ctx context.Context,
	req *connect.Request[apiv1.GetVolunteerProfileRequest],
) (*connect.Response[apiv1.GetVolunteerProfileResponse], error) {
	v, err := s.ensureVolunteer(ctx)
	if err != nil {
		return nil, err
	}
	p := &apiv1.VolunteerProfile{
		Id:         v.ID.String(),
		FirstName:  v.FirstName,
		MiddleName: v.MiddleName,
		LastName:   v.LastName,
		Email:      v.Email,
		Phone:      v.Phone,
		Address:    v.Address,
	}
	res := connect.NewResponse(&apiv1.GetVolunteerProfileResponse{
		Volunteer: p,
	})
	return res, nil
}
